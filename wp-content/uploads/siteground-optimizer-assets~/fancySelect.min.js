'use strict';(function(){var a;a=window.jQuery||window.Zepto||window.$,a.fn.fancySelect=function(c){var d,b,e=!1;return c==null&&(c={}),b=a.extend({forceiOS:!1,includeBlank:!1,optionTemplate:function(a){return a.text()},triggerTemplate:function(a){return a.text()}},c),d=!!navigator.userAgent.match(/iP(hone|od|ad)/i),this.each(function(){var j,i,f,c,g,k,h;if(c=a(this),c.hasClass('fancified')||c[0].tagName!=='SELECT')return;return c.addClass('fancified'),c.css({width:1,height:1,display:'none',position:'absolute',top:0,left:0,opacity:0}),c.wrap('<div class="fancy-select">'),h=c.parent(),c.data('class')&&h.addClass(c.data('class')),h.append('<div class="trigger">'),h.append('<ul class="options">'),g=h.find('.trigger'),f=h.find('.options'),i=c.prop('disabled'),i&&h.addClass('disabled'),k=function(){var a;return a=b.triggerTemplate(c.find(':selected')),g.html(a)},c.on('blur.fs',function(){if(g.hasClass('open'))return setTimeout(function(){return g.trigger('close.fs')},120)}),g.on('close.fs',function(){return g.removeClass('open'),f.removeClass('open')}),g.on('close',function(){var a=c.parent();if(!a.is(':hover')||a.is(':hover')&&e)return e=!1,g.removeClass('open'),f.removeClass('open')}),c.parent().on('mouseout',function(){c.trigger('focus')}),g.on('click.fs',function(){var e,b;if(!i)if(g.toggleClass('open'),g.hasClass('open')&&(b=g.parent(),e=b.offsetParent(),b.offset().top+b.outerHeight()+f.outerHeight()+20>a(window).height()+a(window).scrollTop()?f.addClass('overflowing'):f.removeClass('overflowing')),f.toggleClass('open'),!d)return c.focus()}),c.on('enable',function(){return c.prop('disabled',!1),h.removeClass('disabled'),i=!1,j()}),c.on('disable',function(){return c.prop('disabled',!0),h.addClass('disabled'),i=!0}),c.on('change.fs',function(a){return a.originalEvent&&a.originalEvent.isTrusted?a.stopPropagation():k()}),c.on('keydown',function(c){var b,d,a;if(a=c.which,b=f.find('.hover'),b.removeClass('hover'),f.hasClass('open')){if(a===38?(c.preventDefault(),b.length&&b.index()>0?b.prev().addClass('hover'):f.find('li:last-child').addClass('hover')):a===40?(c.preventDefault(),b.length&&b.index()<f.find('li').length-1?b.next().addClass('hover'):f.find('li:first-child').addClass('hover')):a===27?(c.preventDefault(),g.trigger('click.fs')):a===13||a===32?(c.preventDefault(),b.trigger('click.fs')):a===9&&g.hasClass('open')&&g.trigger('close.fs'),d=f.find('.hover'),d.length)return f.scrollTop(0),f.scrollTop(d.position().top-12)}else if(a===13||a===32||a===38||a===40)return c.preventDefault(),g.trigger('click.fs')}),f.on('click.fs','li',function(e){var b;return b=a(this),c.val(b.data('raw-value')),d||c.trigger('blur.fs').trigger('focus.fs'),f.find('.selected').removeClass('selected'),b.addClass('selected'),g.addClass('selected'),c.val(b.data('raw-value')).trigger('change.fs').trigger('blur.fs').trigger('focus.fs')}),f.on('mouseenter.fs','li',function(){var b,c;return c=a(this),b=f.find('.hover'),b.removeClass('hover'),c.addClass('hover')}),f.on('mouseleave.fs','li',function(){return f.find('.hover').removeClass('hover')}),j=function(){var d;return k(),d=c.find('option'),c.find('option').each(function(e,c){var d;if(c=a(c),!c.prop('disabled')&&(c.val()||b.includeBlank))return d=b.optionTemplate(c),c.prop('selected')?f.append('<li data-raw-value="'+c.val()+'" class="selected">'+d+"</li>"):f.append('<li data-raw-value="'+c.val()+'">'+d+"</li>")})},c.on('update.fs',function(){return h.find('.options').empty(),j()}),j()})}}).call(this)